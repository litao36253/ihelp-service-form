webpackJsonp([1],{"/MwJ":function(t,e){},"4uUG":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("dRIH");var s=a("4P48"),r=a.n(s),n=a("IvJb"),i=a("3cXf"),o=a.n(i),l=a("lC5x"),c=a.n(l),u=a("J0Oq"),f=a.n(u),_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-panel",style:this.myStyle||{}},[e("div",{staticClass:"my-panel-header"},[this._v(this._s(this.title))]),this._v(" "),e("div",{staticClass:"my-panel-body"},[this._t("my-panel-body")],2)])},staticRenderFns:[]};var E=a("vSla")({name:"my-panel",data:function(){return{}},props:["title","myStyle"]},_,!1,function(t){a("Raop")},"data-v-79746b42",null).exports,m={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"mount",class:{red:this.red}},[this._v("已输入 "),this._t("enter-mount",[this._v("0")]),this._v("/"),this._t("total-mount",[this._v("0")])],2)},staticRenderFns:[]};var D=a("vSla")({name:"mount",props:["mount"],computed:{red:function(){return this.mount>2e3}}},m,!1,function(t){a("wky1")},"data-v-68e5f1f0",null).exports,p=a("rVsN"),d=a.n(p),T=top.ajaxRequest,h=function(){return new d.a(function(t,e){T({req:[{service:"U5003834",title:"/location/queryCity1",cityid:"128244390,128790786,128244723,128245372,128244956,128244542,128245608,128244496128245372,128244796"}],func:function(e){t(e[0])}})})},S=function(t){return new d.a(function(e,a){T({req:[{service:"U5003827",title:"/location/queryProperty",city_spec_id:t}],func:function(t){e(t[0])}})})},v=function(t){return new d.a(function(e,a){T({req:[{service:"U5003828",title:"/location/queryBuild",property_spec_id:t}],func:function(t){e(t[0])}})})},I=function(t){return new d.a(function(e,a){T({req:[{service:"U5003829",title:"/location/queryFloor",build_spec_id:t}],func:function(t){e(t[0])}})})},P=function(){return new d.a(function(t,e){T({req:[{service:"U5003832",title:"/worktask/queryPriority"}],func:function(e){t(e[0])}})})},C=function(t){return new d.a(function(e,a){T({req:[{service:"U5003831",title:"/worktask/queryReqeustService",last_request_value:t||""}],func:function(t){e(t[0])}})})},g=function(t,e,a,s){return new d.a(function(r,n){T({req:[{service:"U5003836",title:"/worktask/assetlist",triassetstatuscl:"Available",property:t,search_value:s,pageSize:a,pageNo:e}],func:function(t){r(t[0])}})})},L=function(t,e,a,s,r){return new d.a(function(n,i){var o={};o.service=e,s&&(o.title=s),r&&(o.OPT_SNO=r),t.CALL_CODE&&(o.CALL_CODE=t.CALL_CODE),t.CHANNEL&&(o.CHANNEL=t.CHANNEL),t.CONTRY&&(o.CONTRY=t.CONTRY),t.CITY_SPEC_ID&&(o.CITY_SPEC_ID=t.CITY_SPEC_ID),t.CITY&&(o.CITY=t.CITY),t.PROVINCE&&(o.PROVINCE=t.PROVINCE),t.PARK_SPEC_ID&&(o.PARK_SPEC_ID=t.PARK_SPEC_ID),t.PARK&&(o.PARK=t.PARK),t.BUILD_SPEC_ID&&(o.BUILD_SPEC_ID=t.BUILD_SPEC_ID),t.BUILDING&&(o.BUILDING=t.BUILDING),t.FLOOR_SPEC_ID&&(o.FLOOR_SPEC_ID=t.FLOOR_SPEC_ID),t.FLOORS&&(o.FLOORS=t.FLOORS),t.EQUIPMENT&&(o.EQUIPMENT=t.EQUIPMENT),t.EQUIPMENT_ID&&(o.EQUIPMENT_ID=t.EQUIPMENT_ID),t.EQUIPMENT_PAGE&&(o.EQUIPMENT_PAGE=t.EQUIPMENT_PAGE),t.DEMAND_USER&&(o.DEMAND_USER=t.DEMAND_USER),t.INPUT_PERSON&&(o.INPUT_PERSON=t.INPUT_PERSON),t.QUEST_SOURCE&&(o.QUEST_SOURCE=t.QUEST_SOURCE),t.QUEST_TYPE&&(o.QUEST_TYPE=t.QUEST_TYPE),t.QUEST_TYPE_PATH&&(o.QUEST_TYPE_PATH=t.QUEST_TYPE_PATH),t.URGENT&&(o.URGENT=t.URGENT),t.QUEST_HANDLE_PERSON&&(o.QUEST_HANDLE_PERSON=t.QUEST_HANDLE_PERSON),t.EDOCID&&(o.EDOCID=t.EDOCID),t.QUEST_DESCRIBE&&(o.QUEST_DESCRIBE=t.QUEST_DESCRIBE),t.SOLVE_METHOD&&(o.SOLVE_METHOD=t.SOLVE_METHOD),o.STATE=a,o.SERVREG_TYPE="Corrective",o.SOURCES="ihelp",T({req:[o],func:function(t){t[0],n(t[0])},error:function(t){i(t)}})})},N=function(t){return new d.a(function(e,a){T({req:[{service:"U5003837",OPT_SNO:t,page:1,pagecount:1}],func:function(t){t[0][0]?e(t[0][0]):a()}})})},R=function(t){return new d.a(function(e,a){T({req:[{service:"HUA10002",pagecount:150,sourceField:"name,userId,empNo",CUST_IDF_CODE:t}],func:function(t){e(t[0])}})})},U=function(t){return new d.a(function(e,a){T({req:[{service:"U1008804",ATTA_IDS:t}],func:function(t,s){if("0"!=s.MSG_CODE)return alert("查询附件列表出错，错误原因："+s.MSG_TEXT),void a();e(t[0])}})})},O=a("aA9S"),A=a.n(O),b=a("owHb"),x=a.n(b),w=(a("BhOT"),a("AXC5"),a("g/xo"),a("XT0l"),a("bCIR"),a("IPO4"),a("SdbJ"),a("j77O"),a("zyg/"),a("JCO+"),a("enwz"),{props:{value:{type:String,required:!0},setting:{}},watch:{value:function(t){0!=this.status&&x.a.activeEditor.getContent()==t||x.a.activeEditor.setContent(t),this.status=2}},data:function(){return{status:0,id:"editor-"+(new Date).getMilliseconds()}},methods:{},mounted:function(){var t=this,e={selector:"#"+t.id,language_url:"/ihelp/uccweb/business/AdmServiceReg/cssJs/tinymce/zh_CN.js",language:"zh_CN",skin_url:"/ihelp/uccweb/business/AdmServiceReg/cssJs/tinymce/skins/lightgray",menubar:"",height:"100px",plugins:["link image"],toolbar1:" undo redo | link image emoticons media codesample | styleselect | forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent ",autosave_interval:"20s",image_advtab:!0,table_default_styles:{width:"100%",borderCollapse:"collapse"},init_instance_callback:function(e){e,e.on("input change undo redo",function(){var a=e.getContent();t.$emit("input",a)})}};A()(e,t.setting),x.a.init(e)},beforeDestroy:function(){x.a.get(this.id).destroy()}}),M={render:function(){var t=this.$createElement;return(this._self._c||t)("textarea",{attrs:{id:this.id},domProps:{value:this.value}})},staticRenderFns:[]};var y=a("vSla")(w,M,!1,function(t){a("wPNT")},"data-v-50ee89a7",null).exports,k={CHANNEL:"51",CONTRY:"中国",CITY_SPEC_ID:"",CITY:"",PROVINCE:"",PARK:"",PARK_SPEC_ID:"",BUILD_SPEC_ID:"",BUILDING:"",FLOOR_SPEC_ID:"",FLOORS:"",EQUIPMENT:"",EQUIPMENT_ID:"",EQUIPMENT_PAGE:1,DEMAND_USER:"",INPUT_PERSON:"",QUEST_SOURCE:1,QUEST_TYPE:"",QUEST_TYPE_PATH:"",URGENT:"",QUEST_HANDLE_PERSON:"",QUEST_DESCRIBE:"",SOLVE_METHOD:"",EDOCID:",",CALL_CODE:""},Q={CHANNEL:[{required:!0,message:"请选择求助渠道",trigger:"change"}],CONTRY:[{required:!0,message:"请选择国家",trigger:"change"}],CITY_SPEC_ID:[{required:!0,message:"请选择城市",trigger:"change"}],PARK_SPEC_ID:[{required:!0,message:"请选择园区",trigger:"change"}],QUEST_SOURCE:[{required:!0,message:"请选择一个问题来源",trigger:"change"}],DEMAND_USER:[{required:!0,message:"请填写需求人",trigger:"change"}],QUEST_DESCRIBE:[{required:!0,message:"请输入问题描述",trigger:"change"}],INPUT_PERSON:[{required:!0,message:"请填写录单人",trigger:"change"}],QUEST_TYPE_PATH:[{validator:function(t,e,a){H.QUEST_TYPE_PATH&&""==e?a(new Error("如需升级服务单则必须选择问题种类")):a()},trigger:"change"}],URGENT:[{validator:function(t,e,a){H.URGENT&&""==e?a(new Error("如需升级服务单则必须选择处理优先级")):a()},trigger:"change"}],BUILD_SPEC_ID:[{validator:function(t,e,a){H.BUILD_SPEC_ID&&""==e?a(new Error("如需升级服务单则必须选择楼栋")):a()},trigger:"change"}],SOLVE_METHOD:[{validator:function(t,e,a){H.SOLVE_METHOD&&""==e?a(new Error("如行政服务问题已解决则必须填写解决方案")):a()},trigger:"change"}]};Q.CALL_CODE=Q.FLOOR_SPEC_ID=Q.EQUIPMENT_ID=Q.QUEST_HANDLE_PERSON=[{validator:function(t,e,a){a()},trigger:"submit"}];var H={QUEST_TYPE_PATH:!0,URGENT:!0,BUILD_SPEC_ID:!0,SOLVE_METHOD:!0},Y={chanelList:[{id:"51",name:"电话"},{id:"16",name:"邮件"},{id:"15",name:"APP"}],countryList:[{id:"中国",name:"中国"}],cityList:[],parkList:[],buildList:[],floorList:[],assetList:[],questTypeList:[],urgentList:[]},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{class:["fullWidth"],attrs:{placeholder:t.title,clearable:"",size:"small",disabled:t.disabled,filterable:""},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.listdata,function(e){return a("el-option",{attrs:{label:e[t.textfild],value:e[t.idfiled]}})}))},staticRenderFns:[]};var q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{class:["fullWidth"],attrs:{placeholder:t.title,clearable:"",size:"small",disabled:t.disabled,filterable:"",loading:t.loading},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[t._l(t.listdata,function(e){return a("el-option",{key:e[t.idfiled],attrs:{value:e[t.idfiled],label:t.label(e[t.idfiled],e[t.textfild],e["spi:cstInstallLocationTX"],e["spi:triInstallLocationTX"])}})}),t._v(" "),a("li",{staticStyle:{height:"30px"}},[a("el-button-group",{class:["btnGrp"]},[a("el-button",{attrs:{size:"mini",icon:"el-icon-arrow-left"},on:{click:t.prev}},[t._v("上一页")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:t.next}},[t._v("下一页"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],2)},staticRenderFns:[]};var B={created:function(){var t=this;return f()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:a=e.t0,t.options=a.map(function(t){var e=JSON.parse(o()(t));return e.child=[],e});case 7:case"end":return e.stop()}},e,t)}))()},data:function(){return{val:[],options:[],props:{value:"dcterms:identifier",label:"spi:triNameTX",children:"child"}}},methods:{handleItemChange:function(t){var e=this;return f()(c.a.mark(function a(){var s,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!=t.length){a.next=2;break}return a.abrupt("return");case 2:if(!(s=F(e.options,t[t.length-1])).child){a.next=12;break}if(0!==s.child.length){a.next=12;break}return a.next=7,C(t[t.length-1]);case 7:if(a.t0=a.sent,a.t0){a.next=10;break}a.t0=[];case 10:(r=a.t0)[0]?e.$nextTick(function(){s.child=r.map(function(t){var e=JSON.parse(o()(t));return e.child=[],e})}):delete s.child;case 12:case"end":return a.stop()}},a,e)}))()}},props:["value"],watch:{value:function(t){this.val=t.split(",")},val:function(t){var e=this;this.$emit("input",t.join(","));var a=t,s="";a.forEach(function(t,r){s+=F(e.options,t)["spi:triNameTX"],r<a.length-1&&(s+=" / ")}),this.$emit("questtype",s)}}};function F(t,e){for(var a=0;a<t.length;a++)if(t[a]["dcterms:identifier"]==e)return t[a];for(var s=0;s<t.length;s++){var r=!!t[s].child&&F(t[s].child,e);if(r)return r}}var G={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-cascader",{class:["fullWidth"],attrs:{"change-on-select":!0,"expand-trigger":"hover",options:t.options,props:t.props,clearable:"",size:"small"},on:{change:t.handleItemChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})},staticRenderFns:[]};var V={data:function(){return{options:[],val:"",loading:!1}},props:["title","value"],methods:{remoteMethod:function(t){var e=this;return f()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""===t){a.next=8;break}return e.loading=!0,a.next=4,R(t);case 4:e.options=a.sent,e.loading=!1,a.next=9;break;case 8:e.options=[];case 9:case"end":return a.stop()}},a,e)}))()}},watch:{val:function(t){this.$emit("input",t)},value:function(t){this.val=t}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{class:["fullWidth"],attrs:{size:"small",clearable:"",filterable:"",remote:"",placeholder:t.title,"default-first-option":"","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.options,function(t){return a("el-option",{key:t.w3Account,attrs:{label:t.person_notes_cn,value:t.w3Account}})}))},staticRenderFns:[]};var z={name:"App",components:{myPanel:E,mount:D,editor:y,titlSelect:a("vSla")({data:function(){return{val:""}},created:function(){this.val=this.value},props:["value","listdata","idfiled","textfild","title","disabled"],watch:{value:function(t){this.val=t},val:function(t){this.$emit("input",t)}}},$,!1,function(t){a("RXq9")},"data-v-0e5ea7f4",null).exports,accsSelect:a("vSla")({data:function(){return{val:"",pageNo:1,pageSize:20,query:""}},created:function(){this.val=this.value,this.pageNo=this.assaPage},props:["value","listdata","idfiled","textfild","title","disabled","remote-method","loading","assa-init","assa-page"],watch:{value:function(t){this.val=t},val:function(t){this.$emit("input",t)},assaInit:function(){this.pageNo=1},assaPage:function(t){this.pageNo=t}},methods:{label:function(t,e,a,s){return t+" - "+e+(a?" - "+a:"")+(s?" - "+s:"")},remot:function(t){this.query=t,this.pageNo=1,this.remoteMethod(t,this.pageNo,this.pageSize)},blur:function(){this.query="",this.pageNo=1,this.remoteMethod(this.query,this.pageNo,this.pageSize)},next:function(){this.pageNo++,this.remoteMethod(this.query,this.pageNo,this.pageSize)},prev:function(){this.pageNo>1&&this.pageNo--,this.remoteMethod(this.query,this.pageNo,this.pageSize)}}},q,!1,function(t){a("Ot+o")},"data-v-d7d13860",null).exports,quesSelect:a("vSla")(B,G,!1,function(t){a("4uUG")},"data-v-e1765d8e",null).exports,pepleSelect:a("vSla")(V,K,!1,function(t){a("/MwJ")},"data-v-bf2649a0",null).exports},created:function(){var t=this;return f()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getUrlArgument(),t.sno=a.CALL_SNO||"",t.OPT_SNO=a.OPT_SNO||"",t.sno&&(t.formData.CALL_CODE=t.sno),e.next=6,h();case 6:return t.selectLists.cityList=e.sent,e.next=9,P();case 9:t.selectLists.urgentList=e.sent;case 10:case"end":return e.stop()}},e,t)}))()},watch:{CITY_SPEC_ID:function(t){var e=this;return f()(c.a.mark(function a(){var s;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.selectLists.cityList.find(function(e){return e.CITY_SPEC_ID==t})||{},e.formData.CITY=s.CITYCHNNAME||"",e.formData.PROVINCE=s.PROVINCECHNNAME||"",!t){a.next=11;break}return e.formData.PARK_SPEC_ID="",e.selectLists.parkList=[],a.next=8,S(t);case 8:e.selectLists.parkList=a.sent,a.next=13;break;case 11:e.formData.PARK_SPEC_ID="",e.selectLists.parkList=[];case 13:case"end":return a.stop()}},a,e)}))()},PARK_SPEC_ID:function(t){var e=this;return f()(c.a.mark(function a(){var s;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.selectLists.parkList.find(function(e){return e.PROPERTY_SPEC_ID==t})||{},e.formData.PARK=s.PROPERTYNAME||"",!t){a.next=10;break}return e.formData.BUILD_SPEC_ID="",e.selectLists.buildList=[],a.next=7,v(t);case 7:e.selectLists.buildList=a.sent,a.next=12;break;case 10:e.formData.BUILD_SPEC_ID="",e.selectLists.buildList=[];case 12:case"end":return a.stop()}},a,e)}))()},BUILD_SPEC_ID:function(t){var e=this;return f()(c.a.mark(function a(){var s;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.selectLists.buildList.find(function(e){return e.BUILD_SPEC_ID==t})||{},e.formData.BUILDING=s.BUILDNAME||"",!t){a.next=10;break}return e.formData.FLOOR_SPEC_ID="",e.selectLists.floorList=[],a.next=7,I(t);case 7:e.selectLists.floorList=a.sent,a.next=12;break;case 10:e.formData.FLOOR_SPEC_ID="",e.selectLists.floorList=[];case 12:case"end":return a.stop()}},a,e)}))()},FLOOR_SPEC_ID:function(t){var e=this.selectLists.floorList.find(function(e){return e.FLOOR_SPEC_ID==t})||{};this.formData.FLOORS=e.FLOORNAME||""},EQUIPMENT_ID:function(t){var e=this.selectLists.assetList.find(function(e){return e["spi:triIdTX"]==t})||{},a=e["spi:triIdTX"],s=e["spi:triNameTX"],r=e["spi:cstInstallLocationTX"],n=e["spi:triInstallLocationTX"];this.formData.EQUIPMENT=a+" - "+s+(r?" - "+r:"")+(n?" - "+n:"")},maxSpace:function(t){var e=this;return f()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=9;break}return e.formData.EQUIPMENT_ID="",e.selectLists.assetList=[],a.next=5,g(t,1,20,"");case 5:e.selectLists.assetList=a.sent,e.assaInit++,a.next=12;break;case 9:e.formData.EQUIPMENT_ID="",e.selectLists.assetList=[],e.assaInit++;case 12:case"end":return a.stop()}},a,e)}))()}},data:function(){return{bgColor:"#3D83D2",fullscreenLoading:!1,editorSetting:{height:200},fileList:[],updateUrl:"",sno:"",OPT_SNO:"",formData:k,formRules:Q,formRulesContory:H,selectLists:Y,accsLoading:!1,assaInit:0,assaPage:1}},methods:{commitAll:function(t,e,a){var s=this,r=function(){if(s.formData.QUEST_DESCRIBE.length>2e3)s.$message({message:"对不起，你输入的问题描述过长！",type:"warning"});else if(s.SOLVE_METHODlength>2e3)s.$message({message:"对不起，你输入的解决方案过长！",type:"warning"});else{var r=s.$loading({text:"正在提交，请稍后。。。",background:"rgba(30,30,30,0.3)"});s.$nextTick(f()(c.a.mark(function n(){var i;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=JSON.parse(o()(s.formData)),n.next=4,L(i,t,e,a,s.OPT_SNO);case 4:r.close(),s.$alert("恭喜你，行政工单提交成功。即将关闭窗口！","提示消息",{confirmButtonText:"确定",callback:function(t){top.$N.closeTabs()}}),setTimeout(function(){top.$N.closeTabs()},2e3),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r.close(),s.$message.error("出错了哦，请重试或联系管理员");case 13:case"end":return n.stop()}},n,s,[[0,9]])})))}};0!=e?(1==e?(this.formData.SOLVE_METHOD||this.$message({message:"如行政服务问题已解决则必须填写“解决方案”!",type:"warning",showClose:!0}),this.formRulesContory.SOLVE_METHOD=!0):this.formRulesContory.SOLVE_METHOD=!1,this.formData.QUEST_DESCRIBE||this.$message({message:"“问题描述”为必填项，请先填写！",type:"warning",showClose:!0}),2==e?(this.formData.URGENT||this.$message({message:"如需升级服务单则必须选择“处理优先级”!",type:"warning",showClose:!0}),this.formRulesContory.URGENT=!0,this.formData.QUEST_TYPE_PATH||this.$message({message:"如需升级服务单则必须选择“问题种类”!",type:"warning",showClose:!0}),this.formRulesContory.QUEST_TYPE_PATH=!0):(this.formRulesContory.QUEST_TYPE_PATH=!1,this.formRulesContory.URGENT=!1),this.formData.INPUT_PERSON||this.$message({message:"“录单人”为必填项，请先填写！！",type:"warning",showClose:!0}),this.formData.DEMAND_USER||this.$message({message:"“需求人”为必填项，请先填写！！",type:"warning",showClose:!0}),2==e?(this.formData.BUILD_SPEC_ID||this.$message({message:"如需升级服务单则必须选择“楼栋”!",type:"warning",showClose:!0}),this.formRulesContory.BUILD_SPEC_ID=!0):this.formRulesContory.BUILD_SPEC_ID=!1,this.formData.PARK_SPEC_ID||this.$message({message:"“园区”为必填项，请先填写！！",type:"warning",showClose:!0}),this.formData.CITY_SPEC_ID||this.$message({message:"“城市”为必填项，请先填写！！",type:"warning",showClose:!0}),this.formData.CONTRY||this.$message({message:"“国家”为必填项，请先填写！！",type:"warning",showClose:!0}),this.formData.CHANNEL||this.$message({message:"“求助渠道”为必填项，请先填写！！",type:"warning",showClose:!0}),this.$refs.form.validate(function(t){t&&r()})):(this.$refs.form.clearValidate(),r())},getUrlArgument:function(){var t=location.search,e={};if(-1!=t.indexOf("?"))for(var a=t.substr(1).split("&"),s=0;s<a.length;s++)e[a[s].split("=")[0]]=a[s].split("=")[1];return e},beforeUpload:function(t){return!(t.size>10485760)||(this.$message({type:"warning",message:"你选取的文件大小超过了最大限制10M！"}),!1)},onRemove:function(t,e){var a=this.formData.EDOCID.split(",");a=a.filter(function(e){return e!==t.ATTA_ID}),this.formData.EDOCID=a.join(",")},onSuccess:function(t,e,a){var s=this,r=t[0].data[0].FILEVIEWURL;r.indexOf("ShowEdmImg")>-1&&(r=r.replace("ShowEdmImg","downEdm")),top.ajaxRequest({req:[{service:"U1008501",ATTA_CHNL:"2",ATTA_NAME:t[0].data[0].FILENAME,ATTA_URL:r,ATTA_SIZE:t[0].data[0].FILESIZE}],func:function(t){t[0][0].ID&&(e.ATTA_ID=t[0][0].ID,e.url=r,s.formData.EDOCID+=t[0][0].ID+",",s.$nextTick(function(){for(var t=document.getElementsByClassName("el-upload-list__item-name"),e=0;e<t.length;e++)t[e].innerHTML='<i class="el-icon-document"></i><a href="'+a[e].url+'" download="'+a[e].name+'">'+a[e].name+"</a>"}))}})},onError:function(){this.$message.error("出错了哦，请重试或联系管理员")},questtype:function(t){this.formData.QUEST_TYPE=t},remoteMethod:function(t,e,a){var s=this;return f()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s.accsLoading=!0,r.next=3,g(s.maxSpace,e,a,t);case 3:(n=r.sent).length?(s.selectLists.assetList=n,s.formData.EQUIPMENT_PAGE=e):(s.assaPage=1,s.$nextTick(function(){s.assaPage=e-1||1})),s.accsLoading=!1;case 6:case"end":return r.stop()}},r,s)}))()}},computed:{CITY_SPEC_ID:function(){return this.formData.CITY_SPEC_ID},PARK_SPEC_ID:function(){return this.formData.PARK_SPEC_ID},FLOOR_SPEC_ID:function(){return this.formData.FLOOR_SPEC_ID},BUILD_SPEC_ID:function(){return this.formData.BUILD_SPEC_ID},EQUIPMENT_ID:function(){return this.formData.EQUIPMENT_ID},QUEST_TYPE_PATH:function(){return this.formData.QUEST_TYPE_PATH},SOLVE_METHODlength:function(){return this.formData.SOLVE_METHOD.length},maxSpace:function(){return this.formData.FLOORS?this.formData.FLOORS:this.formData.BUILDING?this.formData.BUILDING:this.formData.PARK?this.formData.PARK:""}},mounted:function(){var t=this;return f()(c.a.mark(function e(){var a,s,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getUrlArgument(),t.updateUrl=top.njs.ipUrl+"/njdf_upload?DIR=import",s=a.cust_code||"",t.formData.DEMAND_USER=s,t.formData.INPUT_PERSON=a.INPUT_PERSON||"",3!=a.flag||!a.OPT_SNO){e.next=29;break}return e.next=8,N(a.OPT_SNO);case 8:return r=e.sent,t.formData.CHANNEL=r.CHANNEL||"",t.formData.CITY_SPEC_ID=r.CITY_SPEC_ID||"",t.$nextTick(function(){t.formData.PROVINCE=r.PROVINCE||"",t.formData.CITY=r.CITY||"",t.formData.PARK_SPEC_ID=r.PARK_SPEC_ID||"",t.$nextTick(function(){t.formData.PARK=r.PARK||"",t.formData.BUILD_SPEC_ID=r.BUILD_SPEC_ID||"",t.$nextTick(function(){t.formData.BUILDING=r.BUILDING||"",t.formData.FLOOR_SPEC_ID=r.FLOOR_SPEC_ID||"",t.$nextTick(function(){t.formData.FLOORS=r.FLOORS||"",t.$nextTick(f()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.formData.EQUIPMENT_ID=r.EQUIPMENT_ID||"",t.formData.EQUIPMENT_PAGE=parseInt(r.EQUIPMENT_PAGE)||1,1==t.formData.EQUIPMENT_PAGE){e.next=7;break}return e.next=5,g(t.maxSpace,t.formData.EQUIPMENT_PAGE,20,"");case 5:t.selectLists.assetList=e.sent,t.assaPage=t.formData.EQUIPMENT_PAGE;case 7:t.$nextTick(function(){t.formData.EQUIPMENT=r.EQUIPMENT||""});case 8:case"end":return e.stop()}},e,t)})))})})})}),t.formData.DEMAND_USER=r.DEMAND_USER||"",t.formData.INPUT_PERSON=r.INPUT_PERSON||"",t.formData.QUEST_SOURCE=parseInt(r.QUEST_SOURCE||1),t.formData.QUEST_TYPE_PATH=r.QUEST_TYPE_PATH||"",t.$nextTick(function(){t.formData.QUEST_TYPE=r.QUEST_TYPE||""}),t.formData.URGENT=r.URGENT||"",t.formData.QUEST_HANDLE_PERSON=r.QUEST_HANDLE_PERSON||"",t.formData.QUEST_DESCRIBE=r.QUEST_DESCRIBE||"",t.formData.SOLVE_METHOD=r.SOLVE_METHOD||"",t.formData.EDOCID=r.EDOCID||"",e.next=24,U(r.EDOCID);case 24:e.sent.forEach(function(e){var a={};a.ATTA_ID=e.ATTA_ID,a.name=e.ATTA_NAME,a.url=e.ATTA_URL,t.fileList.push(a)}),t.$nextTick(function(){for(var e=document.getElementsByClassName("el-upload-list__item-name"),a=0;a<e.length;a++)e[a].innerHTML='<i class="el-icon-document"></i><a href="'+t.fileList[a].url+'" download="'+t.fileList[a].name+'">'+t.fileList[a].name+"</a>"}),e.next=30;break;case 29:t.formData.INPUT_PERSON=top.g_user.USER_ACCOUNT;case 30:case"end":return e.stop()}},e,t)}))()}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-row",{class:["headBg"]},[a("el-col",{class:["headFont"],attrs:{span:18,offset:3}},[t._v("行政服务单")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18,offset:3}},[a("div",{staticStyle:{"padding-top":"34px"}},[a("el-form",{ref:"form",attrs:{model:t.formData,"status-icon":"",rules:t.formRules}},[a("my-panel",{attrs:{title:"行政服务基本信息","my-style":{marginBottom:"20px"}}},[a("div",{attrs:{slot:"my-panel-body"},slot:"my-panel-body"},[a("el-row",{class:["padTop"],attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("求助渠道")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"CHANNEL"}},[a("el-select",{class:["fullWidth"],attrs:{placeholder:"请选择求助渠道",clearable:"",size:"small",filterable:""},model:{value:t.formData.CHANNEL,callback:function(e){t.$set(t.formData,"CHANNEL",e)},expression:"formData.CHANNEL"}},t._l(t.selectLists.chanelList,function(t){return a("el-option",{attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:2}},[t._v("流水号")]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:"CALL_CODE"}},[""==t.sno?a("el-input",{class:["fullWidth"],attrs:{placeholder:"请输入流水号",clearable:"",size:"small"},model:{value:t.formData.CALL_CODE,callback:function(e){t.$set(t.formData,"CALL_CODE",e)},expression:"formData.CALL_CODE"}}):a("span",{style:{color:t.bgColor,cursor:"pointer"},domProps:{innerHTML:t._s("<a onclick=top.showDetail('"+t.formData.CALL_CODE+"')>"+t.formData.CALL_CODE+"</a>")}})],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("国家")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"CONTRY"}},[a("el-select",{class:["fullWidth"],attrs:{disabled:"",placeholder:"请选择国家",clearable:"",size:"small",filterable:""},model:{value:t.formData.CONTRY,callback:function(e){t.$set(t.formData,"CONTRY",e)},expression:"formData.CONTRY"}},t._l(t.selectLists.countryList,function(t){return a("el-option",{attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("城市")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"CITY_SPEC_ID"}},[a("titl-select",{attrs:{listdata:t.selectLists.cityList,textfild:"CITYCHNNAME",idfiled:"CITY_SPEC_ID",title:"请选择城市"},model:{value:t.formData.CITY_SPEC_ID,callback:function(e){t.$set(t.formData,"CITY_SPEC_ID",e)},expression:"formData.CITY_SPEC_ID"}})],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("园区")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"PARK_SPEC_ID"}},[a("titl-select",{attrs:{listdata:t.selectLists.parkList,textfild:"PROPERTYNAME",idfiled:"PROPERTY_SPEC_ID",title:"请选择园区",disabled:""==t.formData.CITY_SPEC_ID},model:{value:t.formData.PARK_SPEC_ID,callback:function(e){t.$set(t.formData,"PARK_SPEC_ID",e)},expression:"formData.PARK_SPEC_ID"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[t._v("楼栋")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"BUILD_SPEC_ID"}},[a("el-select",{class:["fullWidth"],attrs:{placeholder:"请选择楼栋",clearable:"",size:"small",disabled:""==t.formData.PARK_SPEC_ID,filterable:""},model:{value:t.formData.BUILD_SPEC_ID,callback:function(e){t.$set(t.formData,"BUILD_SPEC_ID",e)},expression:"formData.BUILD_SPEC_ID"}},t._l(t.selectLists.buildList,function(t){return a("el-option",{attrs:{label:t.BUILDNAME,value:t.BUILD_SPEC_ID}})}))],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:2}},[t._v("楼层")]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:"FLOOR_SPEC_ID"}},[a("el-select",{class:["fullWidth"],attrs:{placeholder:"请选择楼层",clearable:"",size:"small",disabled:""==t.formData.BUILD_SPEC_ID,filterable:""},model:{value:t.formData.FLOOR_SPEC_ID,callback:function(e){t.$set(t.formData,"FLOOR_SPEC_ID",e)},expression:"formData.FLOOR_SPEC_ID"}},t._l(t.selectLists.floorList,function(t){return a("el-option",{attrs:{label:t.FLOORNAME,value:t.FLOOR_SPEC_ID}})}))],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[t._v("关联设备")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"EQUIPMENT_ID"}},[a("accs-select",{attrs:{listdata:t.selectLists.assetList,textfild:"spi:triNameTX",idfiled:"spi:triIdTX",title:"请选择关联设备",disabled:!(t.formData.PARK_SPEC_ID||t.formData.BUILD_SPEC_ID||t.formData.FLOOR_SPEC_ID),"remote-method":t.remoteMethod,loading:t.accsLoading,"assa-init":t.assaInit,"assa-page":t.assaPage},model:{value:t.formData.EQUIPMENT_ID,callback:function(e){t.$set(t.formData,"EQUIPMENT_ID",e)},expression:"formData.EQUIPMENT_ID"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("需求人")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"DEMAND_USER"}},[a("peple-select",{attrs:{title:"请输入关键词"},model:{value:t.formData.DEMAND_USER,callback:function(e){t.$set(t.formData,"DEMAND_USER",e)},expression:"formData.DEMAND_USER"}})],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("录单人")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"INPUT_PERSON"}},[a("peple-select",{attrs:{title:"请输入关键词"},model:{value:t.formData.INPUT_PERSON,callback:function(e){t.$set(t.formData,"INPUT_PERSON",e)},expression:"formData.INPUT_PERSON"}})],1)],1)],1)],1)]),t._v(" "),a("my-panel",{attrs:{title:"行政服务问题信息"}},[a("div",{attrs:{slot:"my-panel-body"},slot:"my-panel-body"},[a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[t._v("问题来源")]),t._v(" "),a("el-col",{class:["alignLeft"],attrs:{span:9}},[a("el-form-item",{attrs:{prop:"QUEST_SOURCE"}},[a("el-radio-group",{model:{value:t.formData.QUEST_SOURCE,callback:function(e){t.$set(t.formData,"QUEST_SOURCE",e)},expression:"formData.QUEST_SOURCE"}},[a("el-radio",{attrs:{label:1}},[t._v("行政")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("员工")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("内部")])],1)],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("问题种类")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"QUEST_TYPE_PATH"}},[a("ques-select",{on:{questtype:t.questtype},model:{value:t.formData.QUEST_TYPE_PATH,callback:function(e){t.$set(t.formData,"QUEST_TYPE_PATH",e)},expression:"formData.QUEST_TYPE_PATH"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("处理优先级")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"URGENT"}},[a("el-select",{class:["fullWidth"],attrs:{clearable:"",filterable:"",size:"small"},model:{value:t.formData.URGENT,callback:function(e){t.$set(t.formData,"URGENT",e)},expression:"formData.URGENT"}},t._l(t.selectLists.urgentList,function(t){return a("el-option",{attrs:{value:t["spi:triNameTX"],label:t["spi:triNameTX"]}})}))],1)],1),t._v(" "),a("el-col",{class:["alignRight"],attrs:{span:3}},[t._v("问题处理人")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"QUEST_HANDLE_PERSON"}},[a("peple-select",{attrs:{title:"请输入关键词"},model:{value:t.formData.QUEST_HANDLE_PERSON,callback:function(e){t.$set(t.formData,"QUEST_HANDLE_PERSON",e)},expression:"formData.QUEST_HANDLE_PERSON"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("问题描述")]),t._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{prop:"QUEST_DESCRIBE"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入问题描述"},model:{value:t.formData.QUEST_DESCRIBE,callback:function(e){t.$set(t.formData,"QUEST_DESCRIBE",e)},expression:"formData.QUEST_DESCRIBE"}}),t._v(" "),a("mount",{class:"fr",attrs:{mount:t.formData.QUEST_DESCRIBE.length}},[a("span",{attrs:{slot:"enter-mount"},slot:"enter-mount"},[t._v(t._s(t.formData.QUEST_DESCRIBE.length))]),t._v(" "),a("span",{attrs:{slot:"total-mount"},slot:"total-mount"},[t._v("2000")])])],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:16}},[a("el-col",{class:["alignRight"],attrs:{span:3}},[a("span",{staticClass:"requM"},[t._v("*")]),t._v("解决方案")]),t._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{prop:"SOLVE_METHOD"}},[a("editor",{staticClass:"editor",attrs:{setting:t.editorSetting},model:{value:t.formData.SOLVE_METHOD,callback:function(e){t.$set(t.formData,"SOLVE_METHOD",e)},expression:"formData.SOLVE_METHOD"}}),t._v(" "),a("mount",{class:"fr",attrs:{mount:t.SOLVE_METHODlength}},[a("span",{attrs:{slot:"enter-mount"},slot:"enter-mount"},[t._v(t._s(t.SOLVE_METHODlength))]),t._v(" "),a("span",{attrs:{slot:"total-mount"},slot:"total-mount"},[t._v("2000")])])],1)],1)],1),t._v(" "),a("el-row",{class:["padTop2"],attrs:{gutter:16}},[a("el-col",{attrs:{span:18,offset:3}},[a("el-upload",{attrs:{multiple:"",action:t.updateUrl,"before-upload":t.beforeUpload,"on-remove":t.onRemove,"on-success":t.onSuccess,"file-list":t.fileList,"on-error":t.onError}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("上传附件"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1)],1)])],1),t._v(" "),a("el-row",{class:["padTop","padBot"]},[a("el-col",{class:["alignCenter"],attrs:{span:3,offset:7}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){t.commitAll("U5003838","1")}}},[t._v("已解决")])],1),t._v(" "),a("el-col",{class:["alignCenter"],attrs:{span:4}},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.commitAll("U5003838","0")}}},[t._v("保存草稿")])],1),t._v(" "),a("el-col",{class:["alignCenter"],attrs:{span:3}},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.commitAll("U5003833","2","/worktask/createRequest")}}},[t._v("升级")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var J=a("vSla")(z,X,!1,function(t){a("h3q3")},null,null).exports;n.default.use(r.a),new n.default({el:"#app",render:function(t){return t(J)}})},"Ot+o":function(t,e){},RXq9:function(t,e){},Raop:function(t,e){},dRIH:function(t,e){},h3q3:function(t,e){},wPNT:function(t,e){},wky1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.29cde1830865d579a657.js.map